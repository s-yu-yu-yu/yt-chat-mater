(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();const l="AIzaSyBMfxI8XacMUNkkLBqg_BVUKNXHuezvKfg",u=async i=>{const s=i;console.log("videoId",s);const a="https://www.googleapis.com/youtube/v3/videos",o={key:l,id:s,part:"liveStreamingDetails"},t=(await fetch(`${a}?${new URLSearchParams(o)}`).then(n=>n.json())).items[0].liveStreamingDetails;if(console.log("details",t),"activeLiveChatId"in t)return t.activeLiveChatId},d=async(i,s)=>{const a="https://www.googleapis.com/youtube/v3/liveChat/messages";let o={key:l,liveChatId:i,part:"id,snippet,authorDetails",pageToken:s||""};const e=await fetch(`${a}?${new URLSearchParams(o)}`).then(t=>t.json());return console.log("data",e),{nextPageToken:e.nextPageToken,items:e.items}},r=document.getElementById("mater-gauge");document.getElementById("mater-value");const g=20,f=()=>{m(location.href.split("?v=")[1])},m=async i=>{if(!i)return;console.log("url",i);const s=await u(i).then(e=>(console.log("chatId",e),e));if(!s)return;let a="",o=0;for(;;){await new Promise(c=>setTimeout(c,5e3));const{items:e,nextPageToken:t}=await d(s,a);if(!a){a=t;continue}a=t;const n=e.filter(c=>!0);if(n.forEach(c=>console.log(c.snippet.textMessageDetails.messageText)),console.log(n.length),o=o+n.length/g*100,console.log("gaugeValue",o),o<20?r.classList.add("--color-1"):o<50?r.classList.add("--color-2"):o<80?r.classList.add("--color-3"):r.classList.add("--color-4"),o>=100)return;r.style.height=`${o}%`}};f();
